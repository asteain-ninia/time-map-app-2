# 時空地図アプリケーション（time-map-app）

## プロジェクト概要

時空地図アプリケーション（time-map-app）は、架空世界の歴史を時間軸に沿って視覚化・編集するためのデスクトップツールです。ユーザーは歴史的な出来事や勢力の変遷を地図上で管理し、時間スライダーを動かすことで各時代の地理的状況を確認できます。

- **対象ユーザー**: 架空世界のクリエイター、小説家、RPGマスター、世界設定作家
- **プラットフォーム**: Windows, macOS, Linux（Electron.jsベース）
- **動作環境**: オフライン環境で動作可能なスタンドアロンアプリケーション

## 主要機能

### 地図表示と操作

- **基本地図表示**
  - SVG形式の地図の表示
  - ズームイン・ズームアウト、パン操作
  - 横方向無限スクロール（地図の東端・西端をまたぐ領域を表示・編集可能）
  - グリッド線表示（緯度・経度線、カスタマイズ可能）

- **測量機能**
  - 2点間の距離測定（直線距離と球面上の最短距離）
  - クリック位置の緯度・経度表示
  - 中心経度のシフト機能

### 時間管理

- **タイムライン**
  - スライダー操作による年代切替
  - 数値入力による直接指定
  - BC/AD対応
  - 時間経過のアニメーション機能

### 地理情報の管理

- **基本要素**
  - **点情報**（都市、出来事、ランドマークなど）
  - **線情報**（道路、交易路、国境など）
  - **面情報**（領土、地域、国家など）
  - 共有頂点編集による境界の一貫性維持

- **高度な領域管理**
  - 多層レイヤー構造（階層型の組織）
  - レイヤー内での領域排他性
  - 分割・併合・割譲ツール
  - 歴史的な境界変更の追跡

### 注釈システム

- **プロパティ管理**
  - 各地図要素の詳細プロパティ
  - マークダウン形式の説明文対応
  - カテゴリ分類とフィルタリング
  - ツールチップと情報パネル

### 編集ツール

- **モード切替**
  - 追加モード/編集モードの切替
  - 専用ツールパレット
  - 元に戻す/やり直し機能
  - 頂点操作と共有頂点サポート
  - コンテキストメニューによる高度な操作

### データ管理

- **ファイル操作**
  - JSON形式でのローカル保存/読込
  - バージョン管理されたデータ形式
  - 自動バックアップと復元オプション

## 基本的な使い方

### 基本操作

- **地図操作**:
  - パン: マウスドラッグ
  - ズーム: マウスホイールまたはピンチジェスチャー
  - 表示リセット: 地図上でダブルクリック

- **時間操作**:
  - スライダー: ドラッグして年代を変更
  - 直接入力: 特定の年を入力
  - アニメーション: 再生ボタンで時間経過をアニメーション表示

- **要素の追加**:
  1. 「追加モード」に切り替え
  2. 要素タイプ（点、線、多角形）を選択
  3. 地図上をクリックして頂点を配置
  4. 確定してプロパティを入力

- **要素の編集**:
  1. 「編集モード」に切り替え
  2. 編集したい要素を選択
  3. 専用ツールでプロパティや形状を修正
  4. 変更は自動的に現在のプロジェクトに保存

### 高度な機能

- **共有頂点**:
  - 頂点同士を近づけてスナップさせることで共有頂点を作成
  - 共有頂点は連動して移動し、境界の一貫性を維持
  - 共有頂点を右クリックして連携を解除可能

- **レイヤー管理**:
  - 領域間の階層関係を作成
  - レイヤー間の包含ルールを設定
  - レイヤーの表示/非表示を切り替えて特定の側面に焦点を当てる

- **領域操作**:
  - ナイフツールまたは穴あけツールで領域を分割
  - 割譲ツールで領域の所属を変更
  - 高度な編集操作で飛地や飛び地を作成

## アーキテクチャ

時空地図アプリケーションはドメイン駆動設計に基づいて構築され、以下の主要コンポーネントで構成されています:

- **ドメイン層**: コアエンティティとビジネスロジック
- **アプリケーション層**: ユーザー操作の処理と状態管理
- **インフラストラクチャ層**: データの永続化とレンダリング
- **プレゼンテーション層**: ユーザーインターフェースと対話

## 貢献方法

時空地図アプリケーションへの貢献を歓迎します！

## ライセンス

このプロジェクトはGNUライセンスの下で公開されています - 詳細は[LICENSE](LICENSE)ファイルを参照してください。

## 謝辞

このプロジェクトはOpenAIによるChatGPTの諸モデル・AnthropicによるClaudeの諸モデル・GoogleによるGeminiの諸モデルの協力無しには進められないものでした。
これらの協力があったことを明記しておくとともに、深く感謝します。

---

*最終更新: 2025年3月*